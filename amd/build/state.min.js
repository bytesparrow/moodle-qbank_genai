/**
 * Code for checking questions generation state.
 *
 * @package
 * @category    admin
 * @copyright   2023 Ruthy Salomon <ruthy.salomon@gmail.com> , Yedidia Klein <yedidia@openapp.co.il>
 * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("qbank_genai/state",["jquery","core/ajax","core/str","core/templates"],(function($,Ajax,Str,Templates){var intervalId=setInterval((function(){!function(intervalId){if(null===document.getElementById("qbank_genai_userid"))return;var userid=document.getElementById("qbank_genai_userid").textContent.trim(),uniqid=document.getElementById("qbank_genai_uniqid").textContent.trim(),courseid=document.getElementById("qbank_genai_courseid").textContent.trim();Ajax.call([{methodname:"qbank_genai_check_state",args:{userid:userid,uniqid:uniqid}}])[0].then((function(showSuccess){if(""!=showSuccess[0].success){if("0"==showSuccess[0].success)var error=showSuccess[0].tries;else error="";if(!error){var successmessage=JSON.parse(showSuccess[0].success);if(1==Object.keys(successmessage).length)var single=!0;else single=!1}Templates.render("qbank_genai/success",{success:successmessage,courseid:courseid,wwwroot:M.cfg.wwwroot,error:error,single:single}).then((function(html){$("#qbank_genai_success").html(html)})),clearInterval(intervalId)}var percent=0,numoftries=showSuccess[0].numoftries,tries=showSuccess[0].tries;null!==showSuccess[0].tries&&(percent=""!=showSuccess[0].success?100:Math.round(showSuccess[0].tries/numoftries*100),Str.get_strings([{key:"generationtries",component:"qbank_genai",param:tries},{key:"numoftries",component:"qbank_genai",param:numoftries}]).then((function(strings){const[generationtriesStr,numoftriesStr]=strings;Templates.render("qbank_genai/info",{tries:tries,numoftries:numoftries,percent:percent,generationtries_str:generationtriesStr,numoftries_str:numoftriesStr}).then((function(html){$("#qbank_genai_info").html(html)}))})))}))}(intervalId)}),1e4)}));

//# sourceMappingURL=state.min.js.map